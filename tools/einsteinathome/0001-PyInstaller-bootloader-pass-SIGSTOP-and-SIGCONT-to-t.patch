From 85d8c6a9dfbda439ddb93ab9565428841823a753 Mon Sep 17 00:00:00 2001
From: Bernd Machenschalk <bernd.machenschalk@ligo.org>
Date: Tue, 1 Mar 2016 23:27:53 +0100
Subject: [PATCH] PyInstaller bootloader: pass SIGSTOP and SIGCONT to the
 client process

---
 bootloader/common/pyi_utils.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/bootloader/common/pyi_utils.c b/bootloader/common/pyi_utils.c
index a941c00..7c0fd75 100644
--- a/bootloader/common/pyi_utils.c
+++ b/bootloader/common/pyi_utils.c
@@ -1,4 +1,4 @@
-/*
+1/*
  * ****************************************************************************
  * Copyright (c) 2013, PyInstaller Development Team.
  * Distributed under the terms of the GNU General Public License with exception
@@ -496,6 +496,8 @@ int pyi_utils_create_child(const char *thisfile, const int argc, char *const arg
 	signal(SIGINT, SIG_IGN);
 	signal(SIGTERM, SIG_IGN);
 	signal(SIGBREAK, SIG_IGN);
+	signal(SIGSTOP, SIG_IGN);
+	signal(SIGCONT, SIG_IGN);
 
 	VS("LOADER: Setting up to run child\n");
 	sa.nLength = sizeof(sa);
@@ -659,6 +661,8 @@ int pyi_utils_create_child(const char *thisfile, const int argc, char *const arg
         signal(SIGINT, &_signal_handler);
         signal(SIGKILL, &_signal_handler);
         signal(SIGTERM, &_signal_handler);
+        signal(SIGSTOP, &_signal_handler);
+        signal(SIGCONT, &_signal_handler);
     }
 
     wait(&rc);
@@ -670,6 +674,8 @@ int pyi_utils_create_child(const char *thisfile, const int argc, char *const arg
         signal(SIGINT, SIG_DFL);
         signal(SIGKILL, SIG_DFL);
         signal(SIGTERM, SIG_DFL);
+        signal(SIGSTOP, SIG_DFL);
+        signal(SIGCONT, SIG_DFL);
 
         for (i = 0; i < argc_pyi; i++) free(argv_pyi[i]);
         free(argv_pyi);
-- 
2.6.4

